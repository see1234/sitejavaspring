<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Салон красоты MegaTeam</title>
    <meta charset="utf-8">
    <link rel="icon" type="image/x-icon" href="pictures/logo.jpg">

    <link rel="stylesheet" href="css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">

    <link rel="stylesheet" href="css/magnific-popup.css">
    <link rel="stylesheet" href="css/aos.css">
    <link rel="stylesheet" href="css/ionicons.min.css">
    <link rel="stylesheet" href="css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="css/jquery.timepicker.css">
    <link rel="stylesheet" href="css/flaticon.css">
    <link rel="stylesheet" href="css/icomoon.css">
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
<script>
    window.onload = function() {
        showServices();
    };
</script>
<script th:inline="javascript">
    var specialists = /*[[${specialistsJson}]]*/ {};
    var specialistsTimes = /*[[${timesJson}]]*/ {};
</script>
<script th:inline="javascript">
    function showServices() {

        {
        var specialistId = document.getElementById("specialist").value;
        var servicesJson = JSON.parse(specialists);
        if (servicesJson) {
            var services = servicesJson[specialistId];

            var serviceDropdown = document.getElementById("service");
            serviceDropdown.innerHTML = "";

            if (Array.isArray(services)) {
                services.forEach(service => {
                    var option = document.createElement("option");
                    console.log(service);
                    option.value = service.serviceName;
                    option.text = service.serviceName;
                    serviceDropdown.appendChild(option);
                });
            } else {
                console.log("Ошибка: Сервисы не найдены для выбранного специалиста.");
            }
        } else {
            console.log("Ошибка: Специалист не выбран или не найден.");
        }

        {
      var specialistId = document.getElementById("specialist").value;
        var timesJson = JSON.parse(specialistsTimes);
        if (timesJson) {
            var times = timesJson[specialistId];

            var timeDropdown = document.getElementById("time");
            timeDropdown.innerHTML = "";
            var inputDate = document.getElementById("date").value;
            if (Array.isArray(times)) {
                times.forEach(time => {
                    var option = document.createElement("option");
                    console.log(time);
                    console.log(time.date);
                    console.log(inputDate);
                    if (inputDate !== null && time.date === inputDate) {

                    option.value = time.timeName;
                    option.text = time.timeName;
                    timeDropdown.appendChild(option);
                    }

                });
            } else {
                console.log("Ошибка: Сервисы не найдены для выбранного специалиста.");
            }
        } else {
            console.log("Ошибка: Специалист не выбран или не найден.");
        }
        }
        }
    }
</script>

<nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
    <div class="container">
        <a class="navbar-brand" href="/">MegaTeam г. Биробиджан</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
            <span></span> Меню
        </button>
        <div class="collapse navbar-collapse" id="ftco-nav">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item active"><a href="/" class="nav-link">Главная</a></li>
                <li class="nav-item"><a href="prices" class="nav-link">Прайс-лист</a></li>
                <li class="nav-item"><a href="contact" class="nav-link">Контакты</a></li>
            </ul>
        </div>
    </div>
</nav>
<section id="home-section" class="hero" style="background-image: url(images/bg.jpg);" data-stellar-background-ratio="0.5">
    <div class="home-slider owl-carousel">
        <div class="slider-item js-fullheight">
            <div class="overlay"></div>
            <div class="container-fluid p-0">
                <div class="row d-md-flex no-gutters slider-text align-items-end justify-content-end" data-scrollax-parent="true">
                    <img class="one-third align-self-end order-md-last img-fluid" src="images/bg_1.png" alt="">
                    <div class="one-forth d-flex align-items-center ftco-animate" data-scrollax=" properties: { translateY: '70%' }">
                        <div class="text mt-5">
                            <span class="subheading">Салон MegaTeam</span>
                            <h1 class="mb-4">MegaTeam г.Биробиджан</h1>
                            <p class="mb-4">✨ Доверьтесь нашим опытным специалистам и окунитесь в мир роскоши и ухода! ✨</p>
                            <!--<p><a href="#" class="btn btn-primary py-3 px-4">Узнать больше</a></p>-->
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="slider-item js-fullheight">
            <div class="overlay"></div>
            <div class="container-fluid p-0">
                <div class="row d-flex no-gutters slider-text align-items-center justify-content-end" data-scrollax-parent="true">
                    <img class="one-third align-self-end order-md-last img-fluid" src="images/bg_2.png" alt="">
                    <div class="one-forth d-flex align-items-center ftco-animate" data-scrollax=" properties: { translateY: '70%' }">
                        <div class="text mt-5">
                            <span class="subheading">Натуральная красота</span>
                            <h1 class="mb-4">Салон красоты</h1>
                            <p class="mb-4">💄 Хотите идеальный макияж на особый случай? Наши визажисты создадут образ, подчеркивающий вашу уникальность! 💄</p>
                            <!--<p><a href="#" class="btn btn-primary py-3 px-4">Узнать больше</a></p>-->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<section class="ftco-section ftco-no-pb ftco-no-pt">


            <div class="col-md-5 order-md-last wrap-about align-items-stretch">
                <div class="wrap-about-border ftco-animate">
                    <div class="img" style="background-image: url(images/about.jpg); border"></div>
                </div>
            </div>
            <div class="form_container">
                <h2>Записаться онлайн</h2>
                <form th:action="@{/add}" method="POST">
                    <label for="name">Имя:</label>
                    <input type="text" id="name" name="name" required>

                    <label for="surname">Фамилия:</label>
                    <input type="text" id="surname" name="surname" required>

                    <label for="phone">Номер телефона:</label>
                    <input type="text" id="phone" name="phone" required>

                    <label for="date">Дата:</label>
                    <input type="date" onchange="showServices()" id="date" name="date" min="<?php echo date('Y-m-d'); ?>" max="<?php echo date('Y-m-d', strtotime('+7 days')); ?>" required>
                    <label for="specialist">Выбор специалиста:</label>


                    <select name="specialist" id="specialist" onchange="showServices()" required>
                        <option th:each="specialist : ${specialists}" th:value="${specialist.key.id}" th:text="${specialist.key.name}+' '+${specialist.key.lastName}"></option>
                    </select>

                    <label for="service">Выбор услуги:</label>
                    <select name="service" id="service" required>
                        <th:block th:if="${selectedSpecialistId != null}">

                            <th:block   th:each="service : ${specialists[selectedSpecialistId]}">
                                <option th:value="${service.serviceName}" th:text="${service.serviceName}"></option>

                            </th:block>
                        </th:block>
                    </select>

                    <label for="time">Время:</label>
                    <select name="time" id="time" required>
                        <th:block th:if="${selectedSpecialistId != null}">

                            <th:block   th:each="time : ${specialistsTimes[selectedSpecialistId]}">
                                <option th:value="${time.timeName}" th:text="${time.timeName}"></option>

                            </th:block>
                        </th:block>
                    </select>

                    <button type="submit">Записаться</button>
                </form>
            </div>


</section>
<footer class="ftco-footer ftco-footer-2 ftco-section">
    <div class="container">
        <div class="row mb-5">
            <div class="col-md">
                <div class="ftco-footer-widget mb-4">
                    <h2 class="ftco-heading-2 logo"><a href="#">MegaTeam</a></h2>
                    <p>Салон красоты MegaTeam предлагает широкий спектр услуг по уходу за вашей красотой. Посетите нас и насладитесь моментом красоты и релаксации!</p>
                    <ul class="ftco-footer-social list-unstyled float-md-left float-lft mt-5">

                    </ul>
                </div>
            </div>
            <div class="col-md">
                <div class="ftco-footer-widget mb-4 ml-md-5">
                    <h2 class="ftco-heading-2">Ссылки</h2>
                    <ul class="list-unstyled">
                        <li><a href="#" class="py-2 d-block">Главная</a></li>
                        <li><a href="prices" class="py-2 d-block">Прайс-лист</a></li>
                        <li><a href="contact" class="py-2 d-block">Контакты</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-md">
                <div class="ftco-footer-widget mb-4">
                    <h2 class="ftco-heading-2">Сервисы</h2>
                    <ul class="list-unstyled">
                        <li><a href="#" class="py-2 d-block">Стрижки мужские, женские, детские</a></li>
                        <li><a href="#" class="py-2 d-block">Окрашивание волос</a></li>
                        <li><a href="#" class="py-2 d-block">Spa-процедуры для волос (холодное, горячее восстановление)</a></li>
                        <li><a href="#" class="py-2 d-block">Маникюр, педикюр</a></li>
                        <li><a href="#" class="py-2 d-block">Укладки, прически ( свадебные, вечерние)</a></li>
                        <li><a href="#" class="py-2 d-block">Наращивание ресниц, волос</a></li>
                        <li><a href="#" class="py-2 d-block">Коррекция и окрашивание бровей</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-md">
                <div class="ftco-footer-widget mb-4">
                    <h2 class="ftco-heading-2">Связь с нами</h2>
                    <div class="block-23 mb-3">
                        <ul>
                            <li><span class="text">Биробиджан, Набережная д.16</span></li>
                            <li><span class="text">+79005551030</span></a></li>
                            <li><span class="text">ИП Петренко Е.А.</span></a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>


<script src="js/jquery.min.js"></script>
<script src="js/jquery-migrate-3.0.1.min.js"></script>
<script src="js/popper.min.js"></script>
<script src="js/bootstrap.min.js"></script>
<script src="js/jquery.easing.1.3.js"></script>
<script src="js/jquery.waypoints.min.js"></script>
<script src="js/jquery.stellar.min.js"></script>
<script src="js/owl.carousel.min.js"></script>
<script src="js/jquery.magnific-popup.min.js"></script>
<script src="js/aos.js"></script>
<script src="js/jquery.animateNumber.min.js"></script>
<script src="js/bootstrap-datepicker.js"></script>
<script src="js/jquery.timepicker.min.js"></script>
<script src="js/scrollax.min.js"></script>
<script src="js/google-map.js"></script>
<script src="js/main.js"></script>
</body>
</html>